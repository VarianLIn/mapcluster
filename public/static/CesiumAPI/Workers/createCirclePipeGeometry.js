define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian2-bddc1162","./Transforms-f7baeaa6","./RuntimeError-2109023a","./WebGLConstants-76bb35d1","./ComponentDatatype-6d99a1ee","./GeometryAttribute-77eae29c","./GeometryAttributes-4fcfcf40","./IndexDatatype-53503fee","./GeometryOffsetAttribute-7350d9af","./VertexFormat-7572c785","./CylinderGeometryLibrary-b0214ab1"],function(I,t,N,U,B,e,a,S,W,Y,Z,J,f,n){"use strict";var j=new U.Cartesian2,q=new U.Cartesian3,H=new U.Cartesian3,K=new U.Cartesian3;function c(t){var e=(t=I.defaultValue(t,I.defaultValue.EMPTY_OBJECT)).length,a=t.topRadius,n=t.bottomRadius,r=I.defaultValue(t.vertexFormat,f.VertexFormat.DEFAULT),o=I.defaultValue(t.slices,128);this._startRadian=I.defaultValue(t.startRadian,0),this._endRadian=I.defaultValue(t.endRadian,2*Math.PI),this._length=e,this._topRadius=a,this._bottomRadius=n,this._vertexFormat=f.VertexFormat.clone(r),this._slices=o,this._offsetAttribute=t.offsetAttribute,this._workerName="createCirclePipeGeometry"}c.packedLength=f.VertexFormat.packedLength+7,c.pack=function(t,e,a){return a=I.defaultValue(a,0),f.VertexFormat.pack(t._vertexFormat,e,a),a+=f.VertexFormat.packedLength,e[a++]=t._length,e[a++]=t._topRadius,e[a++]=t._bottomRadius,e[a++]=t._slices,e[a++]=t._startRadian,e[a++]=t._endRadian,e[a]=I.defaultValue(t._offsetAttribute,-1),e};var p=new f.VertexFormat,l={vertexFormat:p,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};return c.unpack=function(t,e,a){e=I.defaultValue(e,0);var n=f.VertexFormat.unpack(t,e,p);e+=f.VertexFormat.packedLength;var r=t[e++],o=t[e++],i=t[e++],s=t[e++],u=t[e++],m=t[e++],d=t[e];return I.defined(a)?(a._vertexFormat=f.VertexFormat.clone(n,a._vertexFormat),a._length=r,a._topRadius=o,a._bottomRadius=i,a._slices=s,a._offsetAttribute=-1===d?void 0:d,a):(l.length=r,l.topRadius=o,l.bottomRadius=i,l.slices=s,l.startRadian=u,l.endRadian=m,l.offsetAttribute=-1===d?void 0:d,new c(l))},c.createGeometry=function(t){var e=t._length,a=t._topRadius,n=t._bottomRadius,r=t._vertexFormat,o=t._slices,i=t._startRadian,s=t._endRadian,u=!1;if(0==i&&s==N.CesiumMath.TWO_PI&&(u=!0),!(e<=0||a<0||n<0||0===a&&0===n)){var m=o+o,d=function(t,e,a,n,r,o,i,s){for(var u=.5*t,m=-u,d=new Float64Array(3*(n+n)),f=0,c=s?n-1:n,p=(i-o)/(c-1),l=0;l<c;l++){var b=o+l*p,y=Math.cos(b),v=Math.sin(b),A=y*a,_=v*a,h=y*e,g=v*e;r&&(d[f++]=A,d[f++]=_,d[f++]=m,d[f++]=h,d[f++]=g,d[f++]=u)}return s&&(d[f++]=d[0],d[f++]=d[1],d[f++]=d[2],d[f++]=d[3],d[f++]=d[4],d[f++]=d[5]),d}(e,a,n,o,!0,i,s,u),f=r.st?new Float32Array(2*m):void 0,c=r.normal?new Float32Array(3*m):void 0,p=r.tangent?new Float32Array(3*m):void 0,l=r.bitangent?new Float32Array(3*m):void 0,b=r.normal||r.tangent||r.bitangent;if(b){var y=r.tangent||r.bitangent,v=0,A=0,_=0,h=Math.atan2(n-a,e),g=q;g.z=Math.sin(h);for(var x=Math.cos(h),F=K,R=H,C=0;C<o;C++){var w=C/o*N.CesiumMath.TWO_PI,G=x*Math.cos(w),V=x*Math.sin(w);b&&(g.x=G,g.y=V,y&&(F=U.Cartesian3.normalize(U.Cartesian3.cross(U.Cartesian3.UNIT_Z,g,F),F)),r.normal&&(c[v++]=g.x,c[v++]=g.y,c[v++]=g.z,c[v++]=g.x,c[v++]=g.y,c[v++]=g.z),r.tangent&&(p[A++]=F.x,p[A++]=F.y,p[A++]=F.z,p[A++]=F.x,p[A++]=F.y,p[A++]=F.z),r.bitangent&&(R=U.Cartesian3.normalize(U.Cartesian3.cross(g,F,R),R),l[_++]=R.x,l[_++]=R.y,l[_++]=R.z,l[_++]=R.x,l[_++]=R.y,l[_++]=R.z))}for(C=0;C<o;C++)r.normal&&(c[v++]=0,c[v++]=0,c[v++]=-1),r.tangent&&(p[A++]=1,p[A++]=0,p[A++]=0),r.bitangent&&(l[_++]=0,l[_++]=-1,l[_++]=0);for(C=0;C<o;C++)r.normal&&(c[v++]=0,c[v++]=0,c[v++]=1),r.tangent&&(p[A++]=1,p[A++]=0,p[A++]=0),r.bitangent&&(l[_++]=0,l[_++]=1,l[_++]=0)}var D=6*o-6,T=Z.IndexDatatype.createTypedArray(m,D),L=0,M=0;for(C=0;C<o-1;C++)T[L++]=M,T[L++]=M+2,T[L++]=M+3,T[L++]=M,T[L++]=M+3,T[L++]=M+1,M+=2;var O=0;if(r.st){for(C=0;C<o-1;C++)f[O++]=C/o,f[O++]=0,f[O++]=C/o,f[O++]=1;f[O++]=1,f[O++]=0,f[O++]=1,f[O++]=1}var P=new Y.GeometryAttributes;r.position&&(P.position=new W.GeometryAttribute({componentDatatype:S.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:d})),r.normal&&(P.normal=new W.GeometryAttribute({componentDatatype:S.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:c})),r.tangent&&(P.tangent=new W.GeometryAttribute({componentDatatype:S.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:p})),r.bitangent&&(P.bitangent=new W.GeometryAttribute({componentDatatype:S.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:l})),r.st&&(P.st=new W.GeometryAttribute({componentDatatype:S.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:f})),j.x=.5*e,j.y=Math.max(n,a);var k,E,z=new B.BoundingSphere(U.Cartesian3.ZERO,U.Cartesian2.magnitude(j));return I.defined(t._offsetAttribute)&&(e=d.length,k=new Uint8Array(e/3),E=t._offsetAttribute===J.GeometryOffsetAttribute.NONE?0:1,J.arrayFill(k,E),P.applyOffset=new W.GeometryAttribute({componentDatatype:S.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:k})),new W.Geometry({attributes:P,indices:T,primitiveType:W.PrimitiveType.TRIANGLES,boundingSphere:z,offsetAttribute:t._offsetAttribute})}},function(t,e){return I.defined(e)&&(t=c.unpack(t,e)),c.createGeometry(t)}});
